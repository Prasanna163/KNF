services:
  knf:
    build:
      context: .
      dockerfile: Dockerfile
    image: knf-core:latest
    container_name: knf-core
    working_dir: /work
    volumes:
      - ./:/work
      - knf-cache:/home/mambauser/.knf
    environment:
      KNF_MULTIWFN_PATH: /opt/Multiwfn/Multiwfn
      XTBHOME: /opt/conda
      OMP_NUM_THREADS: "4"
      OPENBLAS_NUM_THREADS: "4"
      MKL_NUM_THREADS: "4"
    command: ["example.mol", "--charge", "0", "--force"]

volumes:
  knf-cache:
